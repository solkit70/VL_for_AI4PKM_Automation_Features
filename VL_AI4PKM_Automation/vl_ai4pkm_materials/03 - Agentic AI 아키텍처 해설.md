아래 문서는 블로그 포스트 "New Architecture for Agentic AI"(2025-10-30, Jin Kim & Minsuk Kang)을 한국어로 자세히 해설한 학습 노트입니다.
원문: https://jykim.github.io/AI4PKM/blog/2025/10/30/new-architecture-for-agentic-ai.html

> 관련 노트: [[01 - Orchestrator 상세 해설]] · [[02 - Orchestrator 구현 스펙]] · [[04 - 온디맨드 지식 태스크 아키텍처 해설]]

## 한눈에 보기
- 주제: “Agentic AI”를 위한 새로운 아키텍처 제안
- 핵심 아이디어: 프롬프트 중심의 사용자 정의 에이전트 + 오케스트레이터 구성으로, 파일/캘린더 이벤트에 반응하는 지식 태스크를 런타임에서 실행
- 사용자 가치: 비개발자용 맥 앱으로 설치·설정 허들 최소화, 음성 명령 인터페이스, Obsidian과 자연스러운 연동, CLI 에이전트(Claude/Codex/Gemini) 선택 가능

## 배경(Background)
- 선행 작업인 “On-demand Knowledge Task Processing”이 파일 이벤트 기반 태스크 실행의 토대를 마련.
- 다음 단계는 “프롬프트 자체가 에이전트를 정의”하도록 일반화하여, 에이전트·프롬프트·스킬을 공유 가능한 오픈소스 프레임워크로 확장.
- 사용성 강화를 위해 데스크톱(맥) 앱을 도입, 설치/업데이트/모니터링을 한곳에서 처리.

## 사용자 가치(User Values)
- 사용자 정의 지식 태스크 런타임
  - 프롬프트로 작업 정의, 파일 시스템 이벤트(신규/수정) 또는 추후 캘린더 이벤트로 트리거.
  - 다양한 CLI 에이전트(Claude, Codex, Gemini) 중 태스크별 최적 선택.
- 비개발자 친화
  - 맥 앱이 의존성 설치·환경 구성·워크플로 모니터링을 제공, 클릭 몇 번으로 가동.
- 음성 명령
  - 맥 앱을 통해 지식 태스크 관리와 단기 작업을 음성으로 지시.

## 아키텍처 구성요소(Architecture Components)
### 1) Orchestrator
- 중앙 조정 레이어. 전체 워크플로(이벤트 수집 → 매칭 → 실행 → 결과 기록)를 관리.
- 설정 두 축
  - 에이전트 레벨: 입력 경로/타입(new_file, updated_file), 출력 경로/타입, 선호 CLI 에이전트(Claude/Codex/Gemini).
  - 시스템 파라미터: 전역 동시성 수준,(선택) 토큰 한도 등 운영 상수.
- 최소 디렉터리(FAQ 예시)
  ```
  orchestrator:
    prompts_dir: "_Settings_/Prompts"
    tasks_dir: "_Settings_/Tasks"
    logs_dir: "_Settings_/Logs"
  ```

### 2) Task
- 단위 작업. 마크다운 파일로 관리하여 추적성과 감사를 보장.
- 기존 아키텍처의 태스크 구조와 대부분 호환해 연속성을 유지.

### 3) Agent
- 각 태스크를 실행하는 런타임 추상화. CLI 에이전트 종류와 무관한 일관된 인터페이스 제공.
- 프롬프트 참조는 `_Settings_/Prompts` 내 파일에 저장, 입출력 설정은 오케스트레이터 구성에서 상속.
- 결과적으로 “프롬프트 정의 + 오케스트레이터 설정”만으로 태스크 파이프라인이 완성.

### 참고: 아키텍처 다이어그램
- 문서에 Orchestrator-Agent 관계 다이어그램(Excalidraw SVG) 링크가 포함되어, 이벤트 → 매칭 → 실행 → 기록 흐름을 시각적으로 보여줍니다.

## PKM 생태계(PKM Ecosystem)
- Mac App(신규)
  - 설치 자동화, 환경 세팅, 실행 상태 모니터링 UI 제공.
- Obsidian
  - 마크다운 문서의 보기/편집, 링크 그래프 가시화, 콘텐츠 베이스(데이터베이스 겸) 뷰어/에디터.
- 코드 에디터 + CLI Agent
  - 인터랙티브한 AI 보조 글쓰기: 변경점(diff) 리뷰 기반 세밀 제어.

## 데이터 흐름(개념)
1) 파일(또는 향후 캘린더) 이벤트 발생
2) 오케스트레이터가 이벤트를 수집, 해당 에이전트 규칙과 매칭
3) 선택된 CLI 에이전트로 프롬프트/입력 전달 → 실행
4) 결과물을 지정 출력 경로에 기록
5) 태스크/로그 파일로 처리 내역을 추적

## 기존 아키텍처와의 관계/차이
- 연속성 유지: 태스크는 기존 온디맨드 시스템의 구조를 재사용하여 마이그레이션 비용이 낮음.
- 일반화/모듈화 강화: 프롬프트가 에이전트를 정의하고, 오케스트레이터가 구성으로 라우팅하므로 확장(프롬프트/스킬 공유)이 쉽다.
- 사용성 확대: 맥 앱 도입으로 설치 장벽과 운영 복잡도를 줄임. 음성 명령 등 인터랙션 채널 확장.

## 장점과 트레이드오프
- 장점
  - 선언적 구성(YAML/프롬프트)으로 확장성·재사용성 향상
  - 마크다운 기반 태스크/로그로 투명성↑, 감사·회귀 용이
  - 다중 에이전트 선택으로 성능/비용/품질 트레이드오프 최적화
  - 맥 앱으로 비개발자 접근성 대폭 개선
- 트레이드오프
  - 오케스트레이터/맥 앱 등 구성요소가 늘어 초기 러닝커브 존재
  - 여러 CLI 에이전트 관리 시 버전/호환성 관리 필요
  - 이벤트 처리·동시성 제어의 운영 파라미터 튜닝이 성능에 영향

## 도입/마이그레이션 가이드(실무 관점)
- 최소 세팅
  - Vault에 `_Settings_/Prompts`, `_Settings_/Tasks`, `_Settings_/Logs` 폴더와 orchestrator 설정 블록 준비.
  - 첫 에이전트는 클리핑 정제(EIC)처럼 입력·출력이 명확한 작업부터.
- 점진 확장
  - updated_file 모드로 Journal 강화, Daily/Weekly 루틴 자동화.
  - 프롬프트를 모듈화하고, 재사용 가능한 “스킬”로 분리해 공유.
- 운영 팁
  - 동시성/타임아웃/우선순위를 태스크 특성에 맞게 점진 조정.
  - 태스크/로그를 통해 병목 구간과 실패 패턴을 주기적으로 점검.

## FAQ 포인트(문서 인용)
- 사전 지식: 맥 앱이 대부분의 기술 허들을 제거. 앱 설치 시 환경 자동 세팅.
- 기존 Obsidian vault 통합: 위 최소 orchestrator 디렉터리 설정만 있으면 시작 가능.
- 더 깊은 구현: GitHub 저장소(레포 링크) 참고.

## 앞으로의 확장(암시된 로드맵)
- 캘린더 이벤트 트리거(coming soon)
- 스킬 공유/마켓플레이스식 확장 가능성
- 맥 앱의 더 풍부한 모니터링/컨트롤(음성, 대시보드 심화)

## 요약
- 이 아키텍처는 “프롬프트로 정의된 사용자 에이전트”를 오케스트레이터가 이벤트 기반으로 실행하는 체계입니다.
- 맥 앱과 Obsidian, CLI 에이전트의 조합으로 비개발자도 실사용 가능한 Agentic AI 기반 PKM을 실현합니다.
- 기존 온디맨드 태스크 구조와의 호환성을 유지하여 도입·확장이 용이합니다.
